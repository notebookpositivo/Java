/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template
 */
/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package View;

import java.util.ArrayList;
import java.util.List;
import javax.swing.JOptionPane;

/**
 *
 * @author Usuario
 */
public class TelaAgendamento extends javax.swing.JFrame {
   
    private static final java.util.logging.Logger logger = java.util.logging.Logger.getLogger(TelaAgendamento.class.getName());
    private List<Compromisso> compromissos = new ArrayList<>();

    /**
     * Creates new form TelaAgendamento
     */
    public TelaAgendamento() {
        initComponents();
    }

    // Classe interna Compromisso
    class Compromisso {
        private int hora;
        private int minuto;
        private String descricao;
        
        public Compromisso(int hora, int minuto, String descricao) {
            this.hora = hora;
            this.minuto = minuto;
            this.descricao = descricao;
        }
        
        public int getHora() { return hora; }
        public int getMinuto() { return minuto; }
        public String getDescricao() { return descricao; }
        
        @Override
        public String toString() {
            return String.format("%02d:%02d - %s", hora, minuto, descricao);
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        Txt_Hora = new javax.swing.JTextField();
        Txt_Descricao = new javax.swing.JTextField();
        Txt_Minuto = new javax.swing.JTextField();
        Lbl_Hora = new javax.swing.JLabel();
        Lbl_Minutos = new javax.swing.JLabel();
        Lbl_Descricao = new javax.swing.JLabel();
        Bnt_BuscarHorario = new javax.swing.JButton();
        Bnt_AdicionarCompromisso = new javax.swing.JButton();
        Bnt_ListarTodos = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        Txt_AreaDescricao = new javax.swing.JTextArea();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        Txt_Hora.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Txt_HoraActionPerformed(evt);
            }
        });
        getContentPane().add(Txt_Hora, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 46, 70, 30));

        Txt_Descricao.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Txt_DescricaoActionPerformed(evt);
            }
        });
        getContentPane().add(Txt_Descricao, new org.netbeans.lib.awtextra.AbsoluteConstraints(410, 46, 199, 30));

        Txt_Minuto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Txt_MinutoActionPerformed(evt);
            }
        });
        getContentPane().add(Txt_Minuto, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 46, 70, 30));

        Lbl_Hora.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Lbl_Hora.setText("Hora(0-23):");
        getContentPane().add(Lbl_Hora, new org.netbeans.lib.awtextra.AbsoluteConstraints(6, 49, -1, -1));

        Lbl_Minutos.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Lbl_Minutos.setText("Minutos(0-59):");
        getContentPane().add(Lbl_Minutos, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 50, -1, -1));

        Lbl_Descricao.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Lbl_Descricao.setText("Descrição:");
        getContentPane().add(Lbl_Descricao, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 50, -1, -1));

        Bnt_BuscarHorario.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Bnt_BuscarHorario.setText("Buscar por Horário");
        Bnt_BuscarHorario.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Bnt_BuscarHorarioActionPerformed(evt);
            }
        });
        getContentPane().add(Bnt_BuscarHorario, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 100, -1, -1));

        Bnt_AdicionarCompromisso.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Bnt_AdicionarCompromisso.setText("Adicionar Compromisso");
        Bnt_AdicionarCompromisso.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Bnt_AdicionarCompromissoActionPerformed(evt);
            }
        });
        getContentPane().add(Bnt_AdicionarCompromisso, new org.netbeans.lib.awtextra.AbsoluteConstraints(6, 100, -1, -1));

        Bnt_ListarTodos.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        Bnt_ListarTodos.setText("Listar Todos");
        Bnt_ListarTodos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                Bnt_ListarTodosActionPerformed(evt);
            }
        });
        getContentPane().add(Bnt_ListarTodos, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 100, -1, -1));

        Txt_AreaDescricao.setEditable(false);
        Txt_AreaDescricao.setColumns(20);
        Txt_AreaDescricao.setRows(5);
        jScrollPane1.setViewportView(Txt_AreaDescricao);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(6, 145, 597, 159));

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>                        

    private void Bnt_BuscarHorarioActionPerformed(java.awt.event.ActionEvent evt) {                                                  
        try {
            int hora = Integer.parseInt(Txt_Hora.getText());
            int minuto = Integer.parseInt(Txt_Minuto.getText());
            
            boolean encontrado = false;
            StringBuilder resultado = new StringBuilder();
            
            for (Compromisso comp : compromissos) {
                if (comp.getHora() == hora && comp.getMinuto() == minuto) {
                    resultado.append("COMPROMISSO ENCONTRADO:\n");
                    resultado.append(comp + "\n");
                    encontrado = true;
                    break;
                }
            }
            
            if (!encontrado) {
                resultado.append("Nenhum compromisso encontrado para " + 
                               String.format("%02d:%02d", hora, minuto));
            }
            
            Txt_AreaDescricao.setText(resultado.toString());
            
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Digite números válidos para hora e minuto!", "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }                                                

    private void Bnt_ListarTodosActionPerformed(java.awt.event.ActionEvent evt) {                                                
        if (compromissos.isEmpty()) {
            Txt_AreaDescricao.setText("Nenhum compromisso na agenda.");
            return;
        }
        
        StringBuilder resultado = new StringBuilder();
        resultado.append("--- COMPROMISSOS AGENDADOS ---\n\n");
        
        for (int i = 0; i < compromissos.size(); i++) {
            resultado.append((i + 1) + ". " + compromissos.get(i) + "\n");
        }
        
        Txt_AreaDescricao.setText(resultado.toString());
    }                                              

    private void Txt_HoraActionPerformed(java.awt.event.ActionEvent evt) {                                        
        // TODO add your handling code here:
    }                                        

    private void Txt_DescricaoActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:
    }                                            

    private void Txt_MinutoActionPerformed(java.awt.event.ActionEvent evt) {                                          
        // TODO add your handling code here:
    }                                          

    private void Bnt_AdicionarCompromissoActionPerformed(java.awt.event.ActionEvent evt) {                                                         
        try {
            int hora = Integer.parseInt(Txt_Hora.getText());
            int minuto = Integer.parseInt(Txt_Minuto.getText());
            String descricao = Txt_Descricao.getText();
            
            if (hora < 0 || hora > 23) {
                JOptionPane.showMessageDialog(this, "Hora inválida! Use valores entre 0 e 23.", "Erro", JOptionPane.ERROR_MESSAGE);
                return;
            }
            if (minuto < 0 || minuto > 59) {
                JOptionPane.showMessageDialog(this, "Minuto inválido! Use valores entre 0 e 59.", "Erro", JOptionPane.ERROR_MESSAGE);
                return;
            }
            if (descricao.trim().isEmpty()) {
                JOptionPane.showMessageDialog(this, "Descrição não pode estar vazia!", "Erro", JOptionPane.ERROR_MESSAGE);
                return;
            }
            
            Compromisso novo = new Compromisso(hora, minuto, descricao);
            compromissos.add(novo);
            
            Txt_Hora.setText("");
            Txt_Minuto.setText("");
            Txt_Descricao.setText("");
            
            JOptionPane.showMessageDialog(this, "Compromisso adicionado com sucesso!", "Sucesso", JOptionPane.INFORMATION_MESSAGE);
            
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Digite números válidos para hora e minuto!", "Erro", JOptionPane.ERROR_MESSAGE);
        }
    }                                                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ReflectiveOperationException | javax.swing.UnsupportedLookAndFeelException ex) {
            logger.log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> new TelaAgendamento().setVisible(true));
    }

    // Variables declaration - do not modify                    
    private javax.swing.JButton Bnt_AdicionarCompromisso;
    private javax.swing.JButton Bnt_BuscarHorario;
    private javax.swing.JButton Bnt_ListarTodos;
    private javax.swing.JLabel Lbl_Descricao;
    private javax.swing.JLabel Lbl_Hora;
    private javax.swing.JLabel Lbl_Minutos;
    private javax.swing.JTextArea Txt_AreaDescricao;
    private javax.swing.JTextField Txt_Descricao;
    private javax.swing.JTextField Txt_Hora;
    private javax.swing.JTextField Txt_Minuto;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration                  
}
